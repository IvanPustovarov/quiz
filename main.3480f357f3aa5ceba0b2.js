"use strict";(self.webpackChunkquiz=self.webpackChunkquiz||[]).push([[179],{4715:function(e,r,n){var t=n(5893),o=n(745),i=n(2228),a=(0,i.ZL)()((function(){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},wrapper:{color:"white"},active:{color:"yellow"}}})),s=n(848),u=n(5673),l=(0,s.LC)({reducerPath:"quizApi",baseQuery:(0,u.ni)({baseUrl:"https://opentdb.com/"}),endpoints:function(e){return{getQuestionByParams:e.query({query:function(e){return{url:"api.php",params:e}}}),getCategory:e.query({query:function(){return"api_category.php"}})}}}),c=l.useGetQuestionByParamsQuery,d=l.useGetCategoryQuery,f=n(743),m=f.I0,y=f.v9,h=n(4268);function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function v(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return p(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b={questionCount:void 0,category:void 0,difficalty:"",categories:[],isScreenShowed:"start",userStep:0,userScore:0,correctUsersAnswers:[]},x=(0,h.oM)({name:"homescreen",initialState:b,reducers:{setDifficalty:function(e,r){e.difficalty=r.payload},setCategory:function(e,r){e.category=r.payload.toString()},setResetQuestionsParams:function(e){e.category="",e.isScreenShowed="start",e.difficalty="",e.questionCount=0},addUserAnswer:function(e,r){e.correctUsersAnswers=v(e.correctUsersAnswers).concat([r.payload])},setQuestionCount:function(e,r){e.questionCount=r.payload},setScreenShowed:function(e,r){e.isScreenShowed=r.payload},setIncrementQuestionStep:function(e,r){e.userStep=r.payload},resetUserAnswer:function(e){e.correctUsersAnswers=[],e.category="",e.isScreenShowed="start",e.difficalty="",e.questionCount=0,e.userStep=0,e.userScore=0},calculateUserScore:function(e){for(var r=0;r<e.correctUsersAnswers.length;r++){var n=e.correctUsersAnswers[r];n.userAnswer===n.correct&&(e.userScore=e.userScore+1)}}}}),S=x.actions,g=S.setCategory,j=S.setDifficalty,w=S.setQuestionCount,A=S.setScreenShowed,C=S.setIncrementQuestionStep,Z=S.setResetQuestionsParams,q=S.addUserAnswer,I=S.resetUserAnswer,U=S.calculateUserScore,N=function(e){return e.homescreen},O=n(1508),Q=n(195),k=n(2574),z=(0,i.ZL)()((function(){return{root:{display:"flex",flexDirection:"column",alignItems:"center"},paragraph:{maxWidth:400,textAlign:"center"}}})),L=n(7294),P=n(7665),D=n(4347),M=n(8025),_=n(2692);function E(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function T(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return E(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=function(e){return"rusName"in e};function B(e){var r=e.options,n=e.label,o=e.handleSelectOption,i=T((0,L.useState)(null),2),a=i[0],s=i[1];return(0,t.jsxs)(M.Z,{sx:{m:1,minWidth:200},size:"small",children:[(0,t.jsx)(P.Z,{id:"select-small-label",children:n}),(0,t.jsx)(_.Z,{labelId:"select-small-label",id:"select-small",value:(null==a?void 0:a.name)||"",label:n,children:null==r?void 0:r.map((function(e,r){return(0,t.jsx)(D.Z,{value:e.name,onClick:function(){return function(e){s(e),o(e)}(e)},children:W(e)?e.rusName:e.name},r)}))})]})}var $=[{id:1,name:"easy",rusName:"легко"},{id:2,name:"medium",rusName:"средне"},{id:3,name:"hard",rusName:"тяжело"}];function G(){var e,r=d(""),n=m(),o=y(N),i=z().classes,a=$.map((function(e){return{name:e.rusName,id:e.id}}));return(0,t.jsxs)("div",{className:i.root,children:[(0,t.jsx)("h1",{children:"Добро пожаловать!"}),(0,t.jsxs)("p",{className:i.paragraph,children:["Предлагаю насладится тестами из нескольких вариантов ответа на выбранную тему. ",(0,t.jsx)("br",{})," Ниже можно задать параметры."]}),(0,t.jsx)(B,{handleSelectOption:function(e){var t,o=null===(t=r.data)||void 0===t?void 0:t.trivia_categories.find((function(r){return r.name===e.name}));(null==o?void 0:o.id)&&n(g(o.id))},label:"Категория",options:null===(e=r.data)||void 0===e?void 0:e.trivia_categories}),(0,t.jsx)(B,{handleSelectOption:function(e){var r=$.find((function(r){return r.rusName===e.name}));(null==r?void 0:r.name)&&n(j(r.name))},label:"Сложность",options:a}),(0,t.jsx)(O.Z,{sx:{width:300},children:(0,t.jsx)(Q.ZP,{size:"small",defaultValue:0,"aria-label":"Small",max:50,min:0,valueLabelDisplay:"auto",onChange:function(e){var r=e.target;r&&"value"in r&&"number"==typeof r.value&&n(w(r.value))}})}),(0,t.jsx)(k.Z,{variant:"contained",disabled:!(o.category&&o.difficalty&&o.questionCount),onClick:function(){n(A("process"))},className:i.root,children:"Поехали"})]})}var R=n(8946),F=n(4524),H=n(5290),V=n(5295),J=n(9161),K=n(2643),X=n(476);function Y(e){var r=document.createElement("div");return r.innerHTML=e,r.textContent}function ee(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function re(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,r)||te(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,r){if(e){if("string"==typeof e)return ee(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,r):void 0}}function oe(e){var r=e.quiz,n=e.questionIndex,o=re((0,L.useState)(""),2),i=o[0],a=o[1],s=(0,L.useMemo)((function(){return r?ne(r.incorrect_answers).concat([r.correct_answer]).sort((function(){return.5-Math.random()})):[]}),[]),u=y(N),l=m();return(0,t.jsxs)(V.Z,{sx:{minWidth:275,maxWidth:500},children:[(0,t.jsx)(K.Z,{children:(0,t.jsxs)(M.Z,{children:[(0,t.jsx)(X.Z,{id:"radio-buttons-group-label",children:r?Y(r.question):""}),(0,t.jsx)(F.Z,{"aria-labelledby":"radio-buttons-group-label",name:"radio-buttons-group",value:i,onChange:function(e){a(e.target.value)},children:s.map((function(e,r){return(0,t.jsx)(H.Z,{value:e,control:(0,t.jsx)(R.Z,{}),label:Y(e)},r)}))})]})}),(0,t.jsx)(J.Z,{children:(0,t.jsx)(k.Z,{disabled:!i,variant:"contained",onClick:function(){if(r){var e={correct:r.correct_answer,userAnswer:i};l(q(e)),l(C(n+1))}u.questionCount&&u.userStep===u.questionCount-1&&(l(A("finish")),l(U()))},children:u.questionCount&&n+1>u.questionCount-1?"Завершить":"Ответить"})})]})}var ie=(0,i.ZL)()((function(){return{root:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},wrapper:{color:"white"},active:{color:"yellow"}}})),ae=n(8973);function se(){return(0,t.jsx)(ae.Z,{})}function ue(){var e,r,n=ie().classes,o=y(N),i=m(),a=c({amount:null===(e=o.questionCount)||void 0===e?void 0:e.toString(),difficulty:o.difficalty,category:o.category}),s=a.data,u=function(){return null==s?void 0:s.results[o.userStep]};return a.isLoading?(0,t.jsx)(se,{}):0===(null==s?void 0:s.results.length)?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"Похоже, что вопросы не загрузились. Попробуйте снова"}),(0,t.jsx)(k.Z,{onClick:function(){i(Z())},children:"Попробовать снова"})]}):(0,t.jsx)(t.Fragment,{children:u()?(0,t.jsx)("div",{className:n.root,children:(0,t.jsx)(oe,{questionIndex:o.userStep,quiz:u()},null===(r=u())||void 0===r?void 0:r.correct_answer)}):null})}var le=(0,i.ZL)()((function(){return{root:{display:"flex",flexDirection:"column",alignItems:"center",gap:20,fontSize:20}}}));function ce(){var e=m(),r=y(N),n=le().classes;return(0,t.jsxs)("div",{className:n.root,children:[(0,t.jsx)("div",{children:"Тест пройден!"}),(0,t.jsxs)("div",{children:["Ваш счёт: ",r.userScore]}),(0,t.jsx)(k.Z,{variant:"contained",onClick:function(){e(I()),e(A("start"))},children:"Заново"})]})}var de,fe=function(){var e=a().classes,r=y(N);return(0,t.jsx)("div",{className:e.root,children:"start"===r.isScreenShowed?(0,t.jsx)(G,{}):"process"===r.isScreenShowed?(0,t.jsx)(ue,{}):"finish"===r.isScreenShowed?(0,t.jsx)(ce,{}):null})};function me(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var ye=(0,h.xC)({reducer:(de={},me(de,x.name,x.reducer),me(de,l.reducerPath,l.reducer),de),middleware:function(e){return e().concat(l.middleware)}});(0,u.sj)(ye.dispatch);var he=document.getElementById("root");he&&(0,o.s)(he).render((0,t.jsx)(f.zt,{store:ye,children:(0,t.jsx)(fe,{})}))}},function(e){e.O(0,[216],(function(){return r=4715,e(e.s=r);var r}));e.O()}]);